# 액세스 회선을 통해 인터넷의 내부로!
## ADSL 기술을 이용한 액세스 회선의 구조와 동작
- ADSL은 전화선을 이용하여 컴퓨터가 데이터 통신을 할 수 있는 통신 수단이다.
    - 인터넷 접속용 라우터에서 새로운 MAC주소와 PPPoE, PPP 헤더를 추가해서 ADSL모뎀으로 전송한다.
    - **ADSL 모뎀**은 패킷을 ATM을 이용해 **셀로 분할**하고 전기 신호로 변환하여 **스프리터로 송출**한다.
    - 스플리터는 전화용 주파수, 데이터용 주파수를 분할 후 각각에 전송한다.
    - **DSLAN**에 전기 신호를 수신한 뒤 ATM 셀로 되돌려 송신 이 때 전기 신호를 ATM 셀로 변환한 뒤 BAS에 전달한다.

## 액세스 회선으로 이용하는 PPP와 터널링
- 액세스 회선이 ADSL이나 FTTH로 진화한 것이고, 이에 맞게 액세스 회선을 연결하는 라우터도 진화했는데, 이것이 바로 BAS이다.
- PPPoE는 PPP 메시지를 이더넷의 패킷에 넣어 주고받는다.
- 인터넷 접속용 라우터는 PPPoE의 Discovery 구조에 따라 BAS의 MAC 주소를 찾는다.
- BAS에 패스워드를 보낼 때, 암호화하는 **CHAP**과 암호화하지 않는 **PAP** 방식이 있고, 라우터 설정을 통해 선택해야 한다.
- BAS에서 보낸 TCP/IP 설정값은 인터넷 접속용 라우터의 BAS측 포트에 설정되고 인터넷 접속용 라우터의 준비가 완료된다.
- **BAS**는 인터넷 접속용 라우터에서 패킷을 받아 MAC, PPPoE 헤더를 제거하고 터널링 원리로 프로바이더의 라우터를 향해 송신한다.
- **PPPoA**는 MAC, PPPoE 헤더를 붙이지 않고 패킷을 그대로 저장한다.
- **DHCP 방식**은 PPP를 사용하지 않고 이더넷의 패킷을 ADSL 신호 그대로 변환하여 DSLAM에 송신한다.

## 프로바이더의 내부
- 액세스 회선을 통과한 패킷은 **프로바이더의 POP**에 설치된 라우터에 도착한다.
- NOC는 브로바이더의 핵심 설비로서 POP에서 들어온 패킷이 여기 모여든다.

## 프로바이더를 경유하여 흐르는 패킷
- 라우터에는 최종 목적지가 프로바이더와 상관 없이 모든 경로가 등록되어 있다.
- 따라서 경로표에서 다음 중계 대상을 찾아 패킷을 보내는 동작을 반복하면 그 중 웹 서버측의 POP에 도착할 것이다.
- 이더넷의 내부에서는 BGP라는 구조를 사용해 프로바이더 간에 경로 정보를 교환한다.
- 패킷은 서버측 프로바이더에 도착하고, 패킷은 그곳의 POP를 경유해 서버측 네트워크로 흘러간다.